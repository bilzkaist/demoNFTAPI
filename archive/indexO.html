<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Title</title>
	<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">	
    <!--The includes-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />

    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


    <style>
        /* 64ac15 */
        *,
        *:before,
        *:after {
            box-sizing: border-box;
        }

        body {
            padding: 1em;
            font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 15px;
            color: #b9b9b9;
            background-color: #f5f8ef; /* #f7ecbf #80D2F9;*/
        }

        input,
        input[type="radio"] + label,
        input[type="checkbox"] + label:before,
        select option,
        select {
            width: 100%;
            padding: 1em;
            line-height: 1.4;
            background-color: #80D2F9;
            border: 1px solid #e5e5e5;
            border-radius: 3px;
            -webkit-transition: 0.35s ease-in-out;
            -moz-transition: 0.35s ease-in-out;
            -o-transition: 0.35s ease-in-out;
            transition: 0.35s ease-in-out;
            transition: all 0.35s ease-in-out;
        }

            input:focus {
                outline: 0;
                border-color: #bd8200;
            }

                input:focus + .input-icon i {
                    color: #f0a500;
                }

                input:focus + .input-icon:after {
                    border-right-color: #f0a500;
                }

            input[type="radio"] {
                display: none;
            }

                input[type="radio"] + label,
                select {
                    display: inline-block;
                    width: 50%;
                    text-align: center;
                    float: left;
                    border-radius: 0;
                }

                    input[type="radio"] + label:first-of-type {
                        border-top-left-radius: 3px;
                        border-bottom-left-radius: 3px;
                    }

                    input[type="radio"] + label:last-of-type {
                        border-top-right-radius: 3px;
                        border-bottom-right-radius: 3px;
                    }

                    input[type="radio"] + label i {
                        padding-right: 0.4em;
                    }

                    input[type="radio"]:checked + label,
                    input:checked + label:before,
                    select:focus,
                    select:active {
                        background-color: #f0a500;
                        color: #fff;
                        border-color: #bd8200;
                    }

            input[type="checkbox"] {
                display: none;
            }

                input[type="checkbox"] + label {
                    position: relative;
                    display: block;
                    padding-left: 1.6em;
                }

                    input[type="checkbox"] + label:before {
                        position: absolute;
                        top: 0.2em;
                        left: 0;
                        display: block;
                        width: 1em;
                        height: 1em;
                        padding: 0;
                        content: "";
                    }

                    input[type="checkbox"] + label:after {
                        position: absolute;
                        top: 0.45em;
                        left: 0.2em;
                        font-size: 0.8em;
                        color: #fff;
                        opacity: 0;
                        font-family: FontAwesome;
                        content: "\f00c";
                    }

            input:checked + label:after {
                opacity: 1;
            }

        select {
            height: 3.4em;
            line-height: 2;
        }
        .loader {
            border: 16px solid #80D2F9;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            -webkit-animation: spin 2s linear infinite; /* Safari */
            animation: spin 2s linear infinite;
        }
		.jumbotron {
			outline: solid;
			/*background-image: url("images/1920x500_Banner.jfif");*/
    background-color:#80D2F9 /* #d3eff0  #80D2F9  #007bff #8b5cf6 transparent !important; */
}

        /* Safari */
        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
            select:first-of-type {
                border-top-left-radius: 3px;
                border-bottom-left-radius: 3px;
            }

            select:last-of-type {
                border-top-right-radius: 3px;
                border-bottom-right-radius: 3px;
            }

            select:focus,
            select:active {
                outline: 0;
            }

            select option {
                background-color: #f0a500;
                color: #fff;
            }

        .input-group {
            margin-bottom: 1em;
            zoom: 1;
        }
            .input-group:before,
            .input-group:after {
                content: "";
                display: table;
            }

        .dropdown-item {
            color: black;
        }
            .input-group:after {
                clear: both;
            }

        @media only screen and (max-width: 540px) {
            .col-half {
                width: 100%;
                padding-right: 0;
            }
        }
    </style>
</head>

    <body>
    <script>
        var selectedChain = "";
        function SendOurRequest() {
            console.log("Selected network: " + selectedChain);
            if (selectedChain != "eth" && selectedChain != "rinkeby") {
                alert("Kindly select a valid chain");
                return;
            }
            var contractAddress = document.getElementById("contractAddress").value;
            if (contractAddress == "") {
                alert("Kindly enter a valid owner address");
                return;
            }

            console.log("Selected Address: " + contractAddress);
            var url = "https://deep-index.moralis.io/api/v2/" +
                contractAddress
                + "/nft?chain=" +
                selectedChain + "&format=decimal&limit=0";

            var xhr = new XMLHttpRequest();
            xhr.open("GET", url);

            xhr.setRequestHeader("accept", "application/json");
            xhr.setRequestHeader("X-API-Key", "ln1zhc654Zogksf3kGog6Utj63TtLtngv5yKzqi53xt8mckxzrj3u5VDqTlP2QJV");

            document.getElementById('FetchedImage').style.display = "none";
            document.getElementById('ImgLoader').style.display = "block";
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    try {
                        console.log(xhr.status);
                        console.log(xhr.responseText);
                        var mainObj = JSON.parse(xhr.responseText);
                        var imgParent = JSON.parse(mainObj.result[0].metadata);
                        var imageURL = imgParent.image;
                        document.getElementById('FetchedImage').src = imageURL;
                        document.getElementById('FetchedImage').style.display = "block";
                        console.log("Image URL: " + imageURL);
                    } catch {
                        alert("An error has occured. Either the address is incorrect Or there is no NFT Linked to this address!!!");
                    }
                    document.getElementById('ImgLoader').style.display = "none";
                }
            };

            xhr.send();
        }
    </script>

    <div class="jumbotron jumbotron-fluid" styles= "background-color: #80D2F9">
		    <div class="container">
	        <h1 class="display-4" style="color: #353535">Bilal Smart Blockchain Solutions : API Test</h1>
			<h2 class="display-4" style="color: #353535">Welcome to the Blockchain Smart Contract API Test Demo Site</h2>
        </div>
    </div>
    <div class="container">
            <div class="row">
  <div class="flex-col space-y-2 justify-center items-center">
    <button id='loginButton' onclick="" class="mx-auto rounded-md p-2 bg-purple-500 text-white">
      Connect Wallet (MetaMask)
    </button>
    <p id='userWallet' class='text-lg text-gray-600 my-2'></p>
  </div>

  <script>
    window.userWalletAddress = null
    const loginButton = document.getElementById('loginButton')
    const userWallet = document.getElementById('userWallet')

    function toggleButton() {
      if (!window.ethereum) {
        loginButton.innerText = 'MetaMask is not installed'
        loginButton.classList.remove('bg-purple-500', 'text-white')
        loginButton.classList.add('bg-gray-500', 'text-gray-100', 'cursor-not-allowed')
        return false
      }

      loginButton.addEventListener('click', loginWithMetaMask)
    }

    async function loginWithMetaMask() {
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })
        .catch((e) => {
          console.error(e.message)
          return
        })
      if (!accounts) { return }

      window.userWalletAddress = accounts[0]
      userWallet.innerText = window.userWalletAddress
      loginButton.innerText = 'Sign out of MetaMask'

      loginButton.removeEventListener('click', loginWithMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', signOutOfMetaMask)
      }, 200)
    }

    function signOutOfMetaMask() {
      window.userWalletAddress = null
      userWallet.innerText = ''
      loginButton.innerText = 'Sign in with MetaMask'

      loginButton.removeEventListener('click', signOutOfMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', loginWithMetaMask)
      }, 200)
    }

    window.addEventListener('DOMContentLoaded', () => {
      toggleButton()
    });
  </script>
                <h4 style="color:#303030">What is the valid owner address of your for ERC1155 contract on the testnet Network?</h4>
				<h5 style="color:#4A4949">For Example, Select Network: Rinkeby and Copy this Address : 0xbd4a128fe8ec3d7417e4af2824abe4860b74fea0 </h5>
            </div>
            <div class="row">
                <div class="form-group row">
                    <div class="dropdown show col-md-3">
                        <a class="btn btn-secondary dropdown-toggle w-100"
                           style="height: 2.5rem; background-color:white; color: black;"
                           href="#" role="button" id="btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Select a network
                        </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" href="#" onclick="$('.btn:first-child').text($(this).text()); selectedChain = 'eth';">Ethereum Mainnet</a>
                            <a class="dropdown-item" href="#" onclick="$('.btn:first-child').text($(this).text()); selectedChain= 'rinkeby';">Rinkeby Test Network</a>
                            <a class="dropdown-item" href="#" onclick="$('.btn:first-child').text($(this).text()); selectedChain = 'NULL'">Coming soon</a>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <input class="form-control"
                               style="height: 2.5rem; margin:0"
                               id="contractAddress" placeholder="e.g. 0xbd4a128fe8ec3d7417e4af2824abe4860b74fea0" onchange="SendOurRequest()">
                    </div>
                    <button class="btn btn-primary col-md-2" onclick="SendOurRequest()">Submit</button>
                </div>
            </div>
        </div>
    <div>
        <center>
            <img alt="No image found" id="FetchedImage" class="img-fluid">
            <div id ="ImgLoader"class="loader"></div>
        </center>
    </div>
        <script>
            document.getElementById('FetchedImage').style.display = "none";
            document.getElementById('ImgLoader').style.display = "none";
        </script>
    </body>
</html>